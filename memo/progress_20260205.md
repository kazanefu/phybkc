# 進捗メモ (2026-02-05)

## 実装済みの機能・修正
- **文字列リテラルのバグ修正**:
  - `""` 内でバックスラッシュ (`\`) が含まれる場合にパースエラーになる問題を修正しました。
  - これにより、Windows のパスなどを含むスクリプトが正しく読み込めるようになりました。
- **CLI設定の柔軟化**:
  - `CLI = PowerShell;` のように、クォートなしでの指定に対応しました。
  - `PowerShell`, `cmd`, `wsl` などの主要なシェルのほか、絶対パスでの指定も可能です。
- **ターミナルの自動起動**:
  - `Run` コマンド実行時に、デーモンがウィンドウを持たない状態でも、新しいターミナルウィンドウが開くように修正しました。
- **キーコンボの安定化**:
  - `Ctrl + X` などのコンボ入力において、キーの押し下げと離上の間に適切なディレイ(10ms)を挿入し、アプリケーション側での認識率を向上させました。
- **日本語キーの追加**:
  - `HanZen` (半角/全角), `Henkan` (変換), `Muhenkan` (無変換), `Hiragana` (ひらがな/カタカナ) のスキャンコード定義を追加しました。

## 現在調査・対応中の問題
- **ステータスキーによる動作不良**:
  - CapsLock や半角/全角キーが押されている（または状態が残っている）と、他のスクリプトがトリガーされなくなる問題。
  - **原因**: キーコンボの判定が「現在押されているキーの完全一致」になっているため、余計なキー（ステータスキー）が1つでも押されていると不一致と判定されてしまう。
  - **対策**: 「必要なキーがすべて押されているか（部分一致）」の判定ロジックに変更し、ステータスキーの影響を受けないように修正予定。

## 次のステップ
1. キーコンボ判定ロジックの改善（部分一致・最長一致の導入）。
2. デプロイと動作確認。
